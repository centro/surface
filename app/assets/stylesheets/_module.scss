// ==========================================================================
// Module  
// ========================================================================== 

// DESC:

// This file contains reusable "modules" that define functionally and 
// stylistically related components that can be reused across pages and 
// across applications. 

// TOC:

// [?1] BUTTONS
// [?2] FORMS
// [?3] FOOTER
// [?4] HEADER
// [?5] ICONS
// [?6] LISTS
// [?7] NAVIGATION
// [?8] NOTICES
// [?9] UTILITIES

// ========================================================================== 

// [?1] BUTTONS

// Defaults

.m-button {
  background: $grayscale-0; // Fallback for older browsers.
  @include background-image(linear-gradient(hsl(0, 0, 97%), $grayscale-0));
  @include border-radius(4px);
  border: 1px solid $grayscale-2;
  color: $grayscale-4 !important;
  display: inline-block;
  font-size: modular-scale(-1);
  height: $base-line-height + ($base-line-height / 6);
  line-height: $base-line-height + ($base-line-height / 6);
  padding: 0 8px;
  text-decoration: none;
}

.m-button:hover {
  @include background-image(linear-gradient(white, $grayscale-0));
  color: $grayscale-4;
}

.m-button:active {
  @include background-image(none);
  background-color: $grayscale-0;
}

.m-button--large {
  @extend .m-button;
  font-size: modular-scale(1) !important;
  height: $base-line-height + ($base-line-height / 2);
  line-height: $base-line-height + ($base-line-height / 2);
  padding: 0 $gutter-width * 0.75;
}

.m-button--square {
  line-height: 2em;
  height: 2em;
  padding-left: 0;
  padding-right: 0;
  text-align: center;
  width: 2em;
}

// Colors

.m-button--primary {
  background: lighten($centro-confirm-2, 2%);
  @include background-image(linear-gradient(lighten($centro-confirm-2, 6%), $centro-confirm-2));
  border-color:  darken($centro-confirm-2, 3%);
  color: white !important;
  text-shadow: 0 1px 1px rgba(black, 0.2);
}

.m-button--primary:hover {
  background: lighten($centro-confirm-2, 4%);
  @include background-image(linear-gradient(lighten($centro-confirm-2, 8%), $centro-confirm-2));
  @include box-shadow(0 1px 2px rgba(black, 0.2));
  border-color:  darken($centro-confirm-2, 5%);
  color: white !important;
}

.m-button--primary:active {
  @include background-image(linear-gradient($centro-confirm-2, lighten($centro-confirm-2, 6%)));
}

// [?2] FORMS

.m-form__field {
  margin-bottom: $base-line-height;
  position: relative;
}

.m-form__field > * {
  line-height: inherit;
}

.m-form__infield,
.m-form__controls {
  @extend .m-form__field;
  height: $base-line-height * 1.5;
  line-height: $base-line-height * 1.5;
}

.m-form__controls > p {
  color: $grayscale-3;
  display: inline-block;
  font-size: modular-scale(-1);
  padding-top: 2px;
  white-space: nowrap;
}

.m-form__field--error {
  @extend .m-form__field;
  color: $centro-alert-1;
  position: relative;
}

.m-form__infield--error {
  @extend .m-form__field--error;
  @extend .m-form__infield;
}

.m-form__input {
  @include box-shadow(inset 0 1px 4px rgba(black, 0.125));
  @include transition(all 0.1s 0s);
  border: 1px solid $grayscale-2;
  font-size: modular-scale(0);
  height: $base-line-height * 1.5;
  line-height: 1em; 
  padding: 2px ($gutter-width / 2) 0;
  width: 100%;
}

.ie8 .m-form__input {
  line-height: 1em;
  padding-top: 10px;
}

.m-form__input:focus {
  border-color: $centro-brand-2b; 
  outline: 0;
}

.m-form__input--password {
  @extend .m-form__input;
}

.m-form__input--search {
  @extend .m-form__input;
  padding-left: 32px;
}

.m-form__input--search__icon {
  @include transition(none !important);
  @extend .i-icon;
  color: $grayscale-2;
  cursor: pointer;
  font-size: 14px;
  position: absolute;
    left: 10px;
    top: 6px;
  text-align: center;
  z-index: 10;
}

.m-form__input--search__icon img {
  height: 16px;
  position: relative;
    top: 0px;
  width: 16px;
}

.m-form__input--search:focus + .m-form__input--search__icon {
  @include opacity(0.5);
}

.m-form__input-toggle {
  font-size: modular-scale(-1);
  position: absolute;
    top: 2px;
    right: $gutter-width / 2;
}

.m-form__input-toggle--visible-label {
  @extend .m-form__input-toggle;
  top: 32px;
}

.m-form__field--error > .m-form__input {
  border-color: lighten($centro-alert-1, 5%);
}

.m-form__legend {
  @include pie-clearfix;
  border-top: 1px solid $grayscale-0;
  color: $centro-brand-3c;
  margin-bottom: $base-line-height;
  padding-top: $base-line-height / 3;
}

.s-has-errors .m-form__legend {
  color:  $grayscale-2;
}

.m-form__legend > span {
  color: $grayscale-2;
  font-size: modular-scale(-1);
  float: right;
}

// The input error itself.

.m-form__input__error {
 @include opacity(0);
 padding: 5px 0 0 0;
 position: absolute;
  left: -8px;
  bottom: -32px;
  white-space: nowrap;
 visibility: hidden;
 z-index: 100;
}

.m-form__input__error > span {
 @extend .m-tooltip;
 display: block;
 font-size: modular-scale(-1);
 line-height: $base-line-height + 4px;
 height: $base-line-height + 4px;
 padding: 0 $gutter-width / 2;
}

.m-form__input__error > span:before {
  margin-left: 13px !important;
  left: 0 !important;
  top: -4px !important;
}

.m-form__input__error > span:after {
  margin-left: 14px !important;
  left: 0 !important;
  top: -3px !important;
}

.m-form__input--select {
  width: 100%;
}

.m-form__field--error > .m-form__input:focus + .m-form__input__error,
.m-form__field--error:hover > .m-form__input__error
{
  @include opacity(1);
  visibility: visible;
}

.m-form__label {
  cursor: pointer;
  display: block;
  white-space: nowrap;
}

.m-form__label--inline {
  cursor: pointer;
  display: inline-block;
}

.m-form__label--infield {
  color: $grayscale-3; 
  cursor: text;
  font-style: italic;
  padding: 1px 0 0 10px;
}

::-webkit-input-placeholder {
  @extend .m-form__label--infield;
  padding: 0;
}

:focus::-webkit-input-placeholder {
  opacity: 0.5;
}

// [?3] FOOTER
// This implementation of the footer currently serves as a debugging
// line inside of insight.

.m-footer {
  color: $grayscale-1;
  font-size: modular-scale(-1);
  padding: 0 8px;
  position: fixed;
    bottom: 0;
  text-align: right;
  width: 100%;
}

// [?4] HEADER

.m-header {
  @include adjust-leading-to(2);
  background: $centro-brand-1a;
  border-bottom: 1px solid darken($centro-brand-1a, 5%);
  height: $base-line-height * 1.5;
  line-height: $base-line-height * 1.5;
  position: relative;
  z-index: 100;
}

.m-logo {
  background: image-url("logo.svg") no-repeat left 7px;
  background-size: contain;
  display: inline-block;
  height: 0;
  overflow: hidden;
  margin-left: $gutter-width;
  padding: ($base-line-height * 1.5) 0 0 0 !important;
  width: 84px;
}

.ie8 .m-logo {
  background: image-url("logo.png") no-repeat left -2px;
}

// [?5] ICONS
// Classes used to render various and assorted semantic icons. 

.i-icon {
  @include transition(all 0.25s ease-in-out 0s);
  cursor: pointer;
  display: inline-block;
  font-family: "SS Pika";
  font-size: $base-font-size;
  font-style: normal;
  font-weight: normal;
  text-decoration: none;
  text-rendering: optimizeLegibility;
  white-space: nowrap;
  padding-top: 2px !important; // Align to vertical middle.

  -webkit-font-feature-settings: "liga";
  -moz-font-feature-settings: "liga=1";
  -moz-font-feature-settings: "liga";
  -ms-font-feature-settings: "liga" 1;
  -o-font-feature-settings: "liga";
  font-feature-settings: "liga";

  -webkit-font-smoothing: antialiased;
}

// [?6] LISTS
// Generic utilities that can be used to alter the layout and/or stylistic 
// treatment of lists. 

// Force list elements to render in a single horizontal line. 

.m-list-horiz {
  @include pie-clearfix;
}

.m-list-horiz > li {
  float: left;
  margin-right: $gutter-width * 0.75;
}

.m-list-horiz li:last-child {
  margin-right: 0;
}

// [?7] NAVIGATION

.m-nav {
  @extend .m-list-horiz;
  line-height: $base-line-height * 1.5;
  height: $base-line-height * 1.5 
}

.m-nav > li {
  margin: 0 !important;
  position: relative;
}

.m-nav > li > a {
  @include link-colors(white);
  @include transition(all 0.1s 0.1s);
  border-left: 1px solid darken($centro-brand-1a, 5%);
  display: block;
  font-size: modular-scale(-1);
  height: $base-line-height * 1.5;
  padding: 0 $gutter-width;
  text-shadow: 0 1px 2px rgba(black, 0.25);
}

.m-nav > li > a:hover {
  background: darken($centro-brand-1a, 2.5%);
}

.m-nav > li > a:before {
  @extend .i-icon;
  content: attr(data-icon);
  font-size: inherit;
  padding-right: 8px;
  position: relative;
  vertical-align: middle;
}

.m-nav__sub-menu {
  @include opacity(0);
  position: absolute;
  visibility: hidden;
  width: ($column-width * 2) + $gutter-width;
}

// Account for :hover gap between trigger and target.

.m-nav__sub-menu > li:first-child:before {
 content: '';
 height: 50%;
 position: absolute;
  left: 0;
  top: -19px;
 width: 100%;
 z-index: -1;
}

// [?8] NOTICES
// This classes provide styles for various types of global messages 
// (alerts, confirmation messages, notices, etc.) 

// Sets up a window for the notice to position itself inside of.

.m-notice-window {
  position: absolute;
    left: 0;
    top: 48px;
  line-height: 0;
  height: 42px;
  text-align: center;
  width: 100%;
  z-index: 100;
}

// Default notice styles.

.m-notice {
  @include border-radius(4px);
  background: white;
  border: 5px solid white;
  display: inline-block;
  line-height: 0;
  position: relative;
    top: -26px;
}

// Adds the header's subtle dark blue border around the notice box. 

.m-notice:after {
  @include border-radius(4px 4px 0 0);
  @include box-sizing(content-box);
  border-color: darken($centro-brand-1a, 6%);
  border-style: solid;
  border-width: 1px 1px 0 1px;
  content: "";
  padding: 5px 5px 0 5px;
  position: absolute; 
    left: -6px;
    top: -6px;
  height: 9px;
  width: 100%;
}

.m-notice > p {
  @include border-radius(2px);
  background: $centro-alert-2;
  border: 1px solid darken($centro-alert-2, 10%);
  display: inline-block;
  font-size: modular-scale(-1);
  height: $base-line-height + ($base-line-height / 3);
  line-height: $base-line-height + ($base-line-height / 3);
  overflow: hidden;
  padding: 0 ($gutter-width / 2);
  position: relative;
}

.m-notice > p:before {
  @extend .i-icon;
  display: none;
  font-size: $base-font-size;
  position: absolute;
    left: 10px;
    top: -1px;
}

.m-notice > p > a {
  color: $grayscale-2;
  display: none;
  padding-left: 8px;
  text-decoration: underline;
}

.m-notice > p > a:hover {
  color: $grayscale-5;
}

// Custom notice styles.

.m-notice--alert,
.m-notice--confirm  {
  @extend .m-notice;
}

.m-notice--alert > p,
.m-notice--confirm > p {
  color: white;
  padding-left: 36px;
  text-shadow: 0 1px 2px rgba(black, 0.2);
}

.m-notice--alert > p:before,
.m-notice--confirm > p:before {
  display: block;
}

.m-notice--alert > p {
  background: $centro-alert-1;
  border-color: darken($centro-alert-1, 10%); 
}

.m-notice--alert > p:before  {
  content: 'alert';
}

.m-notice--alert > p > a {
  color: $grayscale-1;
  display: inline;
}

.m-notice--alert > p > a:hover {
  color: white; 
}

.m-notice--confirm > p {
  background: $centro-confirm-2;
  border-color: darken($centro-confirm-2, 2%); 
}

.m-notice--confirm > p:before {
  content: 'check';
}

// [?8] UTILITIES

// Card

.m-card {
  @include background-image(linear-gradient(white, hsl(0, 0, 98%)));
  @include border-radius(5px);
  @include transition(all ease 0.1s 0.1s);
  border: 1px solid $grayscale-1;
  padding: $gutter-width !important;
  margin-right: $gutter-width;
  position: relative;
  text-shadow: 0 1px 0px white;
  width: 100%;
}

.m-card:hover {
  @include box-shadow(0 1px 4px rgba($centro-brand-2b, 0.25));
  border-color: $centro-brand-2b;
  cursor: pointer;
}

.m-card > a {
  color: $grayscale-5;
  height: 100%;
  position: absolute;
    left: 0;
    top: 0;
  text-align: center;
  width: 100%;
}

.m-card > a > span {
  @extend .t-thin;
  font-size: modular-scale(6);
  line-height: 1em;
  margin-top: -0.4em;
  position: absolute;
    left: 0;
    top: 50%;
  width: 100%;
}

// Tooltip

.m-tooltip {
  @include box-shadow(0 3px 6px rgba(black, 0.1));
  @include opacity(0);
  @include transition(all ease 0.1s 0.1s);
  background: white;
  border: 1px solid $grayscale-1;
  position: absolute;
  visibility: hidden;
  z-index: 100;
}

.m-trigger:hover > .m-tooltip,
.m-tooltip:hover {
  @include opacity(1);
  visibility: visible;
}

.m-tooltip > li {
  border-top: 1px solid $grayscale-0;
  line-height: 1em;
  padding: ($gutter-width / 2);
}

.m-tooltip > li:first-child {
  border: none;
}

.m-tooltip > li:first-child:before {
 content: '';
 height: 20px;
 position: absolute;
  left: 0;
  top: -19px;
 width: 100%;
 z-index: -1;
}

.m-tooltip:before {
  content: "";
  display: block;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 10px solid darken($grayscale-1, 6%);
  height: 0;
  margin-left: -10px;
  position: absolute;
    top: -10px;
    left: 50%;
  width: 0;
  z-index: 101;
}

.m-tooltip:after {
  content: "";
  display: block;
  border-left: 9px solid transparent;
  border-right: 9px solid transparent;
  border-bottom: 9px solid white;
  height: 0;
  margin-left: -9px;
  position: absolute;
    top: -9px;
    left: 50%;
  width: 0;
  z-index: 102;
}

.m-tooltip--left-arrow {
  @extend .m-tooltip;
}

.m-tooltip--left-arrow:before,
.m-tooltip--left-arrow:after {
  left: 20px;
}

// Triggers

.m-trigger {
  position: relative;
}

.m-nav .m-trigger > a {
  cursor: pointer;
}

.m-nav .m-trigger:hover > a {
  background: darken($centro-brand-1a, 2.5%);
}
